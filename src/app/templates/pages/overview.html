<div
  class="relative flex h-screen w-full flex-col bg-background-light dark:bg-background-dark"
  data-overview-root
  data-image-id="{{ image_id or '' }}"
>
  {% include 'components/navbar.html' %}
  <main class="flex-1">
    <section
      class="bg-gradient-to-b from-card-light/60 to-transparent dark:from-card-dark/40"
    >
      <div
        class="mx-auto grid max-w-7xl grid-cols-1 gap-5 px-4 py-4 sm:px-4 lg:grid-cols-3 lg:px-8"
      >
        <div class="flex flex-col gap-4 lg:col-span-2">
          <div
            class="rounded-2xl border border-border-light dark:border-border-dark bg-card-light dark:bg-card-dark p-6 shadow-lg"
          >
            <div class="flex flex-col gap-3">
              <div
                class="flex items-center gap-2 text-sm text-text-secondary-light dark:text-text-secondary-dark"
              >
                <a href="{{ url_for('site.collection') }}">Collection</a>
                <span class="material-symbols-outlined text-sm"
                  >chevron_right</span
                >
                <span
                  class="font-semibold text-primary"
                  data-overview-breadcrumb
                  >ID #{{ image_id or '—' }}</span
                >
              </div>
              <h1
                class="text-3xl font-black text-text-light dark:text-text-dark tracking-tight"
                data-overview-title
              >
                {% if image_id %}Papyrus wird geladen …{% else %}Papyrus
                Overview{% endif %}
              </h1>
              <p
                class="text-base text-text-secondary-light dark:text-text-secondary-dark"
              ></p>
            </div>
          </div>
          <div
            class="rounded-2xl border border-border-light dark:border-border-dark bg-card-light dark:bg-card-dark p-4 shadow-lg"
          >
            <div
              class="relative h-80 rounded-xl overflow-hidden flex items-center justify-center bg-card-light dark:bg-card-dark"
              data-overview-image
            >
              <span
                class="loading-indicator-pointer-events-none pointer-events-none absolute inset-0 flex items-center justify-center gap-3"
                data-overview-loading
              >
                <div class="relative flex h-10 w-10">
                  <span
                    class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"
                  ></span>
                  <span
                    class="relative inline-flex h-10 w-10 rounded-full bg-primary/70"
                  ></span>
                </div>
                <div
                  class="text-sm text-text-secondary-light dark:text-text-secondary-dark"
                >
                  Loading preview…
                </div>
              </span>
              <div
                class="absolute inset-0 bg-center bg-contain bg-no-repeat opacity-0 transition-opacity duration-300"
                data-overview-image-content
              ></div>
            </div>
          </div>
        </div>
        <aside class="flex flex-col gap-6 lg:top-4 h-full">
          <div
            class="rounded-2xl border border-border-light dark:border-border-dark bg-card-light dark:bg-card-dark shadow-lg overflow-hidden h-full flex flex-col"
          >
            <div
              class="flex items-center justify-between border-b border-border-light dark:border-border-dark bg-card-light/60 dark:bg-card-dark/60 px-5 py-4"
            >
              <div class="flex items-center gap-3">
                <div>
                  <p
                    class="text-base font-semibold text-text-light dark:text-text-dark"
                  >
                    Pipeline
                  </p>
                </div>
              </div>
            </div>
            <div
              class="flex flex-1 flex-col divide-y divide-border-light dark:divide-border-dark"
              data-pipeline-container
            >
              <div
                class="flex items-center justify-center py-16 text-sm text-text-secondary-light dark:text-text-secondary-dark"
              >
                Loading pipeline…
              </div>
            </div>
          </div>
        </aside>
        <div
          class="rounded-2xl border border-border-light dark:border-border-dark bg-card-light dark:bg-card-dark p-6 shadow-lg lg:col-span-3"
        >
          <div class="grid gap-4 md:grid-cols-4">
            {% set sort_disabled = not image_id %} {% set patterns_disabled = not image_id %} {% set structure_disabled = not image_id %} {% set glyphs_disabled = not image_id %}
            <div
              class="rounded-2xl border border-border-light dark:border-border-dark bg-card-light dark:bg-card-dark/70 p-5 flex h-full flex-col gap-4 {% if sort_disabled %}opacity-70{% else %}hover:border-primary transition{% endif %}"
              data-action-card="sort"
            >
              <div
                class="flex items-center justify-between text-xs font-semibold uppercase tracking-wide"
              >
                <p
                  class="text-text-secondary-light dark:text-text-secondary-dark"
                >
                  Sorting View
                </p>
                <span
                  class="rounded-full px-2 py-1 text-[10px] {% if sort_disabled %}bg-border-light text-text-secondary-light dark:bg-border-dark{% else %}bg-primary/10 text-primary{% endif %}"
                  data-action-badge
                >
                  {% if sort_disabled %}Select Image{% else %}Ready{% endif %}
                </span>
              </div>
              <p
                class="text-sm text-text-secondary-light dark:text-text-secondary-dark"
              >
                Computes the columns and rows to determine the reading
                direction.
              </p>
              <div class="mt-auto flex justify-end">
                <a
                  href="{% if sort_disabled %}#{% else %}{{ url_for('site.sort_page') }}?id={{ image_id }}{% endif %}"
                  class="inline-flex items-center justify-center gap-2 rounded-full border px-5 py-3 text-sm font-semibold {% if sort_disabled %}text-text-secondary-light dark:text-text-secondary-dark border-border-light dark:border-border-dark cursor-not-allowed pointer-events-none border-dashed{% else %}border-primary text-primary hover:bg-primary/10{% endif %}"
                  aria-disabled="{{ 'true' if sort_disabled else 'false' }}"
                  data-action-button
                >
                  <span class="material-symbols-outlined text-base">sort</span>
                  Sorting View
                </a>
              </div>
            </div>
            <div
              class="rounded-2xl border border-border-light dark:border-border-dark bg-card-light dark:bg-card-dark/70 p-5 flex h-full flex-col gap-4 cursor-not-allowed"
              data-action-card="patterns"
            >
              <div
                class="flex items-center justify-between text-xs font-semibold uppercase tracking-wide"
              >
                <p
                  class="text-text-secondary-light dark:text-text-secondary-dark"
                >
                  Pattern Analysis
                </p>
                <span
                  class="rounded-full bg-border-light px-2 py-1 text-text-secondary-light text-[10px] dark:bg-border-dark"
                  data-action-badge
                  >Locked</span
                >
              </div>
              <p
                class="text-sm text-text-secondary-light dark:text-text-secondary-dark"
              >
                Analyses the most frequent glyph sequences and displays patterns
                by length.
              </p>
              <div class="mt-auto flex justify-end">
                <a
                  href="{% if patterns_disabled %}#{% else %}{{ url_for('site.pattern_page', id=image_id) }}{% endif %}"
                  class="inline-flex items-center justify-center gap-2 rounded-full border px-5 py-3 text-sm font-semibold bg-transparent text-text-secondary-light dark:text-text-secondary-dark border-border-light dark:border-border-dark hover:border-primary hover:text-primary pointer-events-none opacity-60 cursor-not-allowed border-dashed"
                  aria-disabled="{{ 'true' if patterns_disabled else 'false' }}"
                  data-action-button
                >
                  <span class="material-symbols-outlined text-base"
                    >dataset</span
                  >
                  View Patterns
                </a>
              </div>
            </div>
            <div
              class="rounded-2xl border border-border-light dark:border-border-dark bg-card-light dark:bg-card-dark/70 p-5 flex h-full flex-col gap-4 cursor-not-allowed"
              data-action-card="structure"
            >
              <div
                class="flex items-center justify-between text-xs font-semibold uppercase tracking-wide"
              >
                <p
                  class="text-text-secondary-light dark:text-text-secondary-dark"
                >
                  Structural Analysis
                </p>
                <span
                  class="rounded-full bg-border-light px-2 py-1 text-text-secondary-light text-[10px] dark:bg-border-dark"
                  data-action-badge
                  >Locked</span
                >
              </div>
              <p
                class="text-sm text-text-secondary-light dark:text-text-secondary-dark"
              >
                Displays the suffix tree to detect recurring patterns and
                textual variants.
              </p>
              <div class="mt-auto flex justify-end">
                <a
                  href="{% if structure_disabled %}#{% else %}{{ url_for('site.structure', id=image_id) }}{% endif %}"
                  class="inline-flex items-center justify-center gap-2 rounded-full border px-5 py-3 text-sm font-semibold bg-transparent text-text-secondary-light dark:text-text-secondary-dark border-border-light dark:border-border-dark hover:border-primary hover:text-primary pointer-events-none opacity-60 cursor-not-allowed border-dashed"
                  aria-disabled="{{ 'true' if structure_disabled else 'false' }}"
                  data-action-button
                >
                  <span class="material-symbols-outlined text-base"
                    >account_tree</span
                  >
                  View Structural Analysis
                </a>
              </div>
            </div>
            <div
              class="rounded-2xl border border-border-light dark:border-border-dark bg-card-light dark:bg-card-dark/70 p-5 flex h-full flex-col gap-4 cursor-not-allowed"
              data-action-card="glyphs"
            >
              <div
                class="flex items-center justify-between text-xs font-semibold uppercase tracking-wide"
              >
                <p
                  class="text-text-secondary-light dark:text-text-secondary-dark"
                >
                  Glyph Analysis
                </p>
                <span
                  class="rounded-full bg-border-light px-2 py-1 text-text-secondary-light text-[10px] dark:bg-border-dark"
                  data-action-badge
                  >Locked</span
                >
              </div>
              <p
                class="text-sm text-text-secondary-light dark:text-text-secondary-dark"
              >
                Analyses the most frequent glyph sequences and displays patterns
                by length.
              </p>
              <div class="mt-auto flex justify-end">
                <a
                  href="{% if patterns_disabled %}#{% else %}{{ url_for('site.pattern_page', id=image_id) }}{% endif %}"
                  class="inline-flex items-center justify-center gap-2 rounded-full border px-5 py-3 text-sm font-semibold bg-transparent text-text-secondary-light dark:text-text-secondary-dark border-border-light dark:border-border-dark hover:border-primary hover:text-primary pointer-events-none opacity-60 cursor-not-allowed border-dashed"
                  aria-disabled="{{ 'true' if patterns_disabled else 'false' }}"
                  data-action-button
                >
                  <span class="material-symbols-outlined text-base"
                    >dataset</span
                  >
                  View Glyph Analysis
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
</div>
